"use strict";function e(e,n,t,o){return new(t||(t=Promise))((function(r,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function u(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,u)}l((o=o.apply(e,n||[])).next())}))}Object.defineProperty(exports,"__esModule",{value:!0});function n(e=0,n,t){var o;let r=0;const i={ease:n=>Math.pow(n/e,4),"ease-in":n=>Math.pow(n/e,2),"ease-in-out":n=>{let t=n/(e/2);return t<1?Math.pow(t,2)/2:-(--t*(t-2)-1)/2},"ease-out":n=>-n/e*(n/e-2),linear:n=>n/e,random:n=>r+Math.pow(Math.random()*(n/e)*(1-r),3)},a=Object.keys(i),u="random"===n?i[a[Math.floor(Math.random()*a.length)]]:null!==(o=i[n])&&void 0!==o?o:i.random;return new Promise((n=>{let o=(new Date).getTime(),i=0,a=!1;const l=()=>{!function(e){if("undefined"!=typeof window)return window.requestAnimationFrame(e);const n=setTimeout((()=>{e(n),clearTimeout(n)}),16.6)}((()=>{if(i=(new Date).getTime()-o,r=u(i),i>=e)null==t||t(1),n(i);else{const e=()=>{a=!0};null==t||t(r,e),a?n(i):l()}}))};l()}))}exports.wait=function(t,o={}){return e(this,void 0,void 0,(function*(){const{mode:e="random",handler:r,onUpdate:i}=o;let a=r?.99:1;const u=r?r():Promise.resolve(),l=yield n(t,e,((e,n)=>{null==i||i(Math.round(e*a*1e4)/1e4,n)})),[s]=yield Promise.all([u,l]);return r&&(null==i||i(1)),s}))};
