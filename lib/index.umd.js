!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).vividWait={})}(this,(function(e){"use strict";function n(e,n,t,o){return new(t||(t=Promise))((function(i,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function u(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,u)}l((o=o.apply(e,n||[])).next())}))}function t(e=0,n,t){var o;let i=0;const a={ease:n=>Math.pow(n/e,4),"ease-in":n=>Math.pow(n/e,2),"ease-in-out":n=>{let t=n/(e/2);return t<1?Math.pow(t,2)/2:-(--t*(t-2)-1)/2},"ease-out":n=>-n/e*(n/e-2),linear:n=>n/e,random:n=>i+Math.pow(Math.random()*(n/e)*(1-i),3)},r=Object.keys(a),u="random"===n?a[r[Math.floor(Math.random()*r.length)]]:null!==(o=a[n])&&void 0!==o?o:a.random;return new Promise((n=>{let o=(new Date).getTime(),a=0;const r=()=>{!function(e){if(requestAnimationFrame)return requestAnimationFrame(e);const n=setTimeout((()=>{e(n),clearTimeout(n)}),16.6)}((()=>{a=(new Date).getTime()-o,i=u(a),a>=e?(null==t||t(1),n(a)):(null==t||t(i),r())}))};r()}))}e.wait=function(e,o={}){return n(this,void 0,void 0,(function*(){const{mode:n="random",handler:i,onUpdate:a}=o;let r=i?.99:1;const u=i?i():Promise.resolve(),l=yield t(e,n,(e=>{null==a||a(e*r)})),[s]=yield Promise.all([u,l]);return null==a||a(1),s}))},Object.defineProperty(e,"__esModule",{value:!0})}));
